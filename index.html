<!DOCTYPE html>
<html>
  <head>
    <title>Simple File Viewer</title>
    <style>
      html, body, textarea {
        margin: 0;
        padding: 0;
        border: 0;
        width: 100%;
        height: 100%;
      }
      body {
        margin: 0;
        padding: 0;
      }
      h1 {
        margin-top: 0;
        padding: 10px;
        background-color: #eee;
      }
      input[type="file"] {
        display: block;
        margin: 10px;
      }
      #file-editor {
        display: block;
        margin: 10px;
        padding: 10px;
        width: 100%;
        min-height: 100%;
        height: 100%;
        border: 1px solid #ccc;
      }
      #textarea-div {
        min-width: 90%;
        width: 90%;
        min-height: 90%;
        height: 90%;
        vertical-align:top;
      }
      #download-button {
        display: block;
        margin: 10px auto;
      }
    </style>
  </head>
  <body>
    <h1>Simple File Viewer</h1>
    <input type="file" id="file-input">
    <button id="upload-button">Upload</button>
    <button id="download-button">Download</button>
    <div id="textarea-div">
      <textarea id="file-editor"></textarea>
    </div>
    <script>
      const uploadButton = document.getElementById('upload-button');
      const fileInput = document.getElementById('file-input');
      const fileContent = document.getElementById('file-content');
      const fileEditor = document.getElementById('file-editor');
      const downloadButton = document.getElementById('download-button');

      uploadButton.addEventListener('click', () => {
        const file = fileInput.files[0];
        console.log(file.name);
        const reader = new FileReader();
        reader.readAsText(file);
        reader.onload = (event) => {
          const text = event.target.result;
          const formattedText = text.replace(/\n/g, '<br>');
          fileEditor.value = text;
        }
      });

      downloadButton.addEventListener('click', () => {
        const updatedText = fileEditor.value;
        const updatedFilename = "updated-" + fileInput.files[0].name;
        const blob = new Blob([updatedText], { type: 'text/plain' });
        const url = URL.createObjectURL(blob);
        const link = document.createElement('a');
        link.href = url;
        link.download = updatedFilename;
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
      });
    </script>
  </body>
</html>